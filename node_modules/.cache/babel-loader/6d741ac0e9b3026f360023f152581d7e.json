{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossSliceReducer;\n\nvar _keys2 = _interopRequireDefault(require(\"lodash/keys\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _merge2 = _interopRequireDefault(require(\"lodash/merge\"));\n\nvar _groupBy2 = _interopRequireDefault(require(\"lodash/groupBy\"));\n\nvar _values2 = _interopRequireDefault(require(\"lodash/values\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction crossSliceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    switch (action.type) {\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n      case _constants.actionTypes.UNSET_LISTENER:\n        var groups = (0, _groupBy2.default)((0, _values2.default)(state.queries), function (c) {\n          return c.storeAs || c.collection;\n        });\n        (0, _keys2.default)(groups).forEach(function (storeAs) {\n          var updated = {};\n          groups[storeAs].forEach(function (item) {\n            return (0, _merge2.default)(updated, (0, _get2.default)(item, 'data', {}));\n          });\n          (0, _set2.default)(draft, ['composite', storeAs], updated);\n        });\n        return draft;\n\n      default:\n        return state;\n    }\n  });\n}","map":{"version":3,"sources":["/Users/JeHongHwang/Desktop/leekang/node_modules/redux-firestore/es/reducers/crossSliceReducer.js"],"names":["Object","defineProperty","exports","value","default","crossSliceReducer","_keys2","_interopRequireDefault","require","_get2","_set2","_merge2","_groupBy2","_values2","_immer","_constants","obj","__esModule","state","arguments","length","undefined","action","draft","type","actionTypes","DOCUMENT_MODIFIED","DOCUMENT_ADDED","DOCUMENT_REMOVED","LISTENER_RESPONSE","UNSET_LISTENER","groups","queries","c","storeAs","collection","forEach","updated","item"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,iBAAlB;;AAEA,IAAIC,MAAM,GAAGC,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAnC;;AAEA,IAAIC,KAAK,GAAGF,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAlC;;AAEA,IAAIE,KAAK,GAAGH,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAlC;;AAEA,IAAIG,OAAO,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAApC;;AAEA,IAAII,SAAS,GAAGL,sBAAsB,CAACC,OAAO,CAAC,gBAAD,CAAR,CAAtC;;AAEA,IAAIK,QAAQ,GAAGN,sBAAsB,CAACC,OAAO,CAAC,eAAD,CAAR,CAArC;;AAEA,IAAIM,MAAM,GAAGP,sBAAsB,CAACC,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIO,UAAU,GAAGP,OAAO,CAAC,cAAD,CAAxB;;AAEA,SAASD,sBAAT,CAAgCS,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEZ,IAAAA,OAAO,EAAEY;AAAX,GAArC;AAAwD;;AAE/F,SAASX,iBAAT,GAA6B;AAC3B,MAAIa,KAAK,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AACA,MAAIG,MAAM,GAAGH,SAAS,CAACC,MAAV,GAAmB,CAAnB,GAAuBD,SAAS,CAAC,CAAD,CAAhC,GAAsCE,SAAnD;AACA,SAAO,CAAC,GAAGP,MAAM,CAACV,OAAX,EAAoBc,KAApB,EAA2B,UAAUK,KAAV,EAAiB;AACjD,YAAQD,MAAM,CAACE,IAAf;AACE,WAAKT,UAAU,CAACU,WAAX,CAAuBC,iBAA5B;AACA,WAAKX,UAAU,CAACU,WAAX,CAAuBE,cAA5B;AACA,WAAKZ,UAAU,CAACU,WAAX,CAAuBG,gBAA5B;AACA,WAAKb,UAAU,CAACU,WAAX,CAAuBI,iBAA5B;AACA,WAAKd,UAAU,CAACU,WAAX,CAAuBK,cAA5B;AACE,YAAIC,MAAM,GAAG,CAAC,GAAGnB,SAAS,CAACR,OAAd,EAAuB,CAAC,GAAGS,QAAQ,CAACT,OAAb,EAAsBc,KAAK,CAACc,OAA5B,CAAvB,EAA6D,UAAUC,CAAV,EAAa;AACrF,iBAAOA,CAAC,CAACC,OAAF,IAAaD,CAAC,CAACE,UAAtB;AACD,SAFY,CAAb;AAGA,SAAC,GAAG7B,MAAM,CAACF,OAAX,EAAoB2B,MAApB,EAA4BK,OAA5B,CAAoC,UAAUF,OAAV,EAAmB;AACrD,cAAIG,OAAO,GAAG,EAAd;AACAN,UAAAA,MAAM,CAACG,OAAD,CAAN,CAAgBE,OAAhB,CAAwB,UAAUE,IAAV,EAAgB;AACtC,mBAAO,CAAC,GAAG3B,OAAO,CAACP,OAAZ,EAAqBiC,OAArB,EAA8B,CAAC,GAAG5B,KAAK,CAACL,OAAV,EAAmBkC,IAAnB,EAAyB,MAAzB,EAAiC,EAAjC,CAA9B,CAAP;AACD,WAFD;AAGA,WAAC,GAAG5B,KAAK,CAACN,OAAV,EAAmBmB,KAAnB,EAA0B,CAAC,WAAD,EAAcW,OAAd,CAA1B,EAAkDG,OAAlD;AACD,SAND;AAOA,eAAOd,KAAP;;AAEF;AACE,eAAOL,KAAP;AAnBJ;AAqBD,GAtBM,CAAP;AAuBD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossSliceReducer;\n\nvar _keys2 = _interopRequireDefault(require(\"lodash/keys\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _merge2 = _interopRequireDefault(require(\"lodash/merge\"));\n\nvar _groupBy2 = _interopRequireDefault(require(\"lodash/groupBy\"));\n\nvar _values2 = _interopRequireDefault(require(\"lodash/values\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction crossSliceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    switch (action.type) {\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n      case _constants.actionTypes.UNSET_LISTENER:\n        var groups = (0, _groupBy2.default)((0, _values2.default)(state.queries), function (c) {\n          return c.storeAs || c.collection;\n        });\n        (0, _keys2.default)(groups).forEach(function (storeAs) {\n          var updated = {};\n          groups[storeAs].forEach(function (item) {\n            return (0, _merge2.default)(updated, (0, _get2.default)(item, 'data', {}));\n          });\n          (0, _set2.default)(draft, ['composite', storeAs], updated);\n        });\n        return draft;\n\n      default:\n        return state;\n    }\n  });\n}"]},"metadata":{},"sourceType":"script"}